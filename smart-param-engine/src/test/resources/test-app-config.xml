<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">


    <bean id="paramEngine" class="pl.generali.merkury.param.core.engine.ParamEngine">
        <property name="paramProvider" ref="paramProvider" />
        <property name="assemblerProvider" ref="assemblerProvider" />
    </bean>

    <bean id="paramProvider" class="pl.generali.merkury.param.core.engine.ParamProviderImpl">
        <property name="typeProvider" ref="typeProvider" />
        <property name="cache" ref="paramCache" />
    </bean>

    <bean id="paramCache" class="pl.generali.merkury.param.core.cache.MapParamCache" />

    <bean id="typeProvider" class="pl.generali.merkury.param.core.config.TypeProvider">
        <property name="typeMap">
            <map>
                <entry key="string" value-ref="stringType" />
                <entry key="integer" value-ref="integerType" />
                <entry key="number" value-ref="numberType" />
                <entry key="plugin" value-ref="pluginType" />
            </map>
        </property>
    </bean>

    <bean id="stringType" class="pl.generali.merkury.param.types.string.StringType" />
    <bean id="integerType" class="pl.generali.merkury.param.types.integer.IntegerType" />
    <bean id="numberType" class="pl.generali.merkury.param.types.number.NumberType" />
    <bean id="pluginType" class="pl.generali.merkury.param.types.plugin.PluginType" />

    <bean id="invokerProvider" class="pl.generali.merkury.param.core.config.InvokerProvider">
        <property name="invokers">
            <map>
                <entry key="java" value-ref="javaFunctionInvoker" />
                <entry key="rhino" value-ref="rhinoFunctionInvoker" />
                <entry key="spring" value-ref="springFunctionInvoker" />
            </map>
        </property>
    </bean>

    <bean id="javaFunctionInvoker" class="pl.generali.merkury.param.core.function.JavaFunctionInvoker" />
    <bean id="springFunctionInvoker" class="pl.generali.merkury.param.core.function.SpringFunctionInvoker" />
    <bean id="rhinoFunctionInvoker" class="pl.generali.merkury.param.core.function.RhinoFunctionInvoker" />

    <bean id="assemblerProvider" class="pl.generali.merkury.param.core.config.AssemblerProvider">
        <property name="assemblerObjects">
            <list>
                <bean class="pl.generali.merkury.param.assemblers.GenericEnumAssembler" />
            </list>
        </property>
    </bean>

    <bean id="matcherProvider" class="pl.generali.merkury.param.core.config.MatcherProvider">
        <property name="matcherMap">
            <map>
                <entry key="between/ie" value-ref="betweenMatcherIE" />
                <entry key="between/ii" value-ref="betweenMatcherII" />
            </map>
        </property>
    </bean>

    <bean id="betweenMatcherIE" class="pl.generali.merkury.param.matchers.BetweenMatcher">
        <property name="lowerInclusive" value="true" />
        <property name="upperInclusive" value="false" />
    </bean>

    <bean id="betweenMatcherII" class="pl.generali.merkury.param.matchers.BetweenMatcher">
        <property name="lowerInclusive" value="true" />
        <property name="upperInclusive" value="true" />
    </bean>

</beans>
